% CodeSense AI - Complete Unit Test Cases Table
% Copy and paste this table into Overleaf.com

\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{booktabs}
\usepackage{array}
\usepackage{xcolor}
\usepackage{geometry}
\usepackage{longtable}
\geometry{a4paper, margin=0.5in}

\begin{document}

\title{CodeSense AI - Complete Unit Test Cases}
\author{Test Documentation}
\date{\today}
\maketitle

\section{Complete Unit Test Cases Table}

\begin{longtable}{|c|p{2.5cm}|p{6cm}|p{5cm}|}
\hline
\textbf{Test \#} & \textbf{Module} & \textbf{Test Case Brief} & \textbf{Required Output} \\
\hline
\endfirsthead

\hline
\textbf{Test \#} & \textbf{Module} & \textbf{Test Case Brief} & \textbf{Required Output} \\
\hline
\endhead

\hline
\endfoot

\hline
\endlastfoot

% Database Module Tests (16 tests)
1 & DB & Test database connection functionality & Returns True for successful connection \\
\hline
2 & DB & Test password hashing with bcrypt & Hashed password differs from original, verification succeeds \\
\hline
3 & DB & Test password verification failure & Returns False for incorrect password \\
\hline
4 & DB & Test long password truncation for bcrypt & Passwords >72 chars are truncated but still verify correctly \\
\hline
5 & DB & Test user creation in database & User object created with correct attributes and auto-generated ID \\
\hline
6 & DB & Test get user by username & Returns correct User object for existing username \\
\hline
7 & DB & Test get user by email & Returns correct User object for existing email \\
\hline
8 & DB & Test successful user authentication & Returns User object for correct username/password combination \\
\hline
9 & DB & Test failed user authentication & Returns None for incorrect password \\
\hline
10 & DB & Test code submission creation & CodeSubmission object created with user\_id, language, file\_path \\
\hline
11 & DB & Test get user submissions & Returns list of submissions ordered by creation date \\
\hline
12 & DB & Test get submission by ID & Returns specific submission belonging to user \\
\hline
13 & DB & Test database connection success & Mock successful database connection \\
\hline
14 & DB & Test database connection failure & Mock failed database connection, returns False \\
\hline
15 & DB & Test create database and tables success & Mock successful table creation \\
\hline
16 & DB & Test create database and tables failure & Mock failed table creation, handles exception \\
\hline

% Authentication Module Tests (13 tests)
17 & Authentication & Test create access token with default expiry & JWT token with 30-minute expiry and correct payload \\
\hline
18 & Authentication & Test create access token with custom expiry & JWT token with specified expiry time \\
\hline
19 & Authentication & Test verify valid token & Returns username from valid JWT token \\
\hline
20 & Authentication & Test verify invalid token & Raises HTTPException for malformed token \\
\hline
21 & Authentication & Test verify expired token & Raises HTTPException for expired token \\
\hline
22 & Authentication & Test verify token without subject & Raises HTTPException for token missing 'sub' claim \\
\hline
23 & Authentication & Test get current user success & Returns User object for valid token and existing user \\
\hline
24 & Authentication & Test get current user not found & Raises HTTPException when user doesn't exist \\
\hline
25 & Authentication & Test UserLogin Pydantic model & Validates username and password fields \\
\hline
26 & Authentication & Test UserSignup Pydantic model & Validates all required signup fields \\
\hline
27 & Authentication & Test UserSignup optional fields & Handles optional full\_name field correctly \\
\hline
28 & Authentication & Test UserResponse Pydantic model & Returns user data without sensitive information \\
\hline
29 & Authentication & Test Token Pydantic model & Validates access\_token and token\_type fields \\
\hline

% Docker Executor Module Tests (13 tests)
30 & Docker Executor & Test Docker client initialization success & DockerExecutor with working client, is\_available() returns True \\
\hline
31 & Docker Executor & Test Docker client initialization failure & DockerExecutor with None client, is\_available() returns False \\
\hline
32 & Docker Executor & Test get Docker image for languages & Returns correct Docker images: python:3.11-slim, node:22-alpine, etc. \\
\hline
33 & Docker Executor & Test get file extension for languages & Returns correct extensions: .py, .js, .cpp, .java, .go \\
\hline
34 & Docker Executor & Test get run command for languages & Returns correct execution commands for each language \\
\hline
35 & Docker Executor & Test execute code when Docker unavailable & Returns error result when Docker client is None \\
\hline
36 & Docker Executor & Test successful code execution & Returns result with exit\_code=0, stdout, stderr, execution\_time \\
\hline
37 & Docker Executor & Test failed code execution & Returns result with non-zero exit\_code and error message \\
\hline
38 & Docker Executor & Test code execution timeout & Returns timeout error when container exceeds time limit \\
\hline
39 & Docker Executor & Test image not found error & Returns error when Docker image doesn't exist \\
\hline
40 & Docker Executor & Test cleanup functionality & Removes temporary files and directories after execution \\
\hline
41 & Docker Executor & Test global executor instance exists & Global docker\_executor instance is available \\
\hline
42 & Docker Executor & Test global executor methods & Global instance has execute\_code and cleanup methods \\
\hline

% Application Logic Module Tests (19 tests)
43 & App Logic & Test analyze code complexity success & Returns complexity metrics: cyclomatic, LOC, time/space complexity \\
\hline
44 & App Logic & Test analyze code complexity Lizard failure & Falls back to script analysis when Lizard fails \\
\hline
45 & App Logic & Test analyze code complexity complete failure & Returns default values when all analysis methods fail \\
\hline
46 & App Logic & Test calculate script complexity Python & Counts functions, classes, loops, conditions in Python code \\
\hline
47 & App Logic & Test calculate script complexity JavaScript & Counts functions, classes, loops, conditions in JS code \\
\hline
48 & App Logic & Test estimate time complexity & Returns appropriate Big O notation based on code patterns \\
\hline
49 & App Logic & Test estimate space complexity & Returns space complexity based on data structures used \\
\hline
50 & App Logic & Test calculate overall score & Returns score 0-100 based on complexity metrics \\
\hline
51 & App Logic & Test CodeAnalysisRequest Pydantic model & Validates code and language fields \\
\hline
52 & App Logic & Test ErrorItem Pydantic model & Validates line, column, message, severity fields \\
\hline
53 & App Logic & Test CodeAnalysisResponse Pydantic model & Validates all response fields including complexity metrics \\
\hline
54 & App Logic & Test debug ping endpoint & Returns \{"status": "ok", "message": "Server is running"\} \\
\hline
55 & App Logic & Test debug models endpoint success & Returns available AI models when API key is present \\
\hline
56 & App Logic & Test debug models endpoint no API key & Returns error message when GEMINI\_API\_KEY is missing \\
\hline
57 & App Logic & Test analyze code endpoint success & Returns analysis result with AI response and complexity metrics \\
\hline
58 & App Logic & Test analyze code execution failure & Handles Docker execution errors gracefully \\
\hline
59 & App Logic & Test analyze code missing authentication & Returns 403 Forbidden when no auth token provided \\
\hline
60 & App Logic & Test get submissions endpoint & Returns user's code submissions with pagination \\
\hline
61 & App Logic & Test get submissions no authentication & Returns 403 Forbidden when no auth token provided \\
\hline

\end{longtable}

\section{Test Execution Summary}

\begin{table}[h]
\centering
\begin{tabular}{|l|c|c|c|}
\hline
\textbf{Module} & \textbf{Test Count} & \textbf{Pass Rate} & \textbf{Coverage} \\
\hline
Database & 16 & 100\% & 87\% \\
\hline
Authentication & 13 & 100\% & 74\% \\
\hline
Docker Executor & 13 & 100\% & 85\% \\
\hline
Application Logic & 19 & 100\% & 97\% \\
\hline
\textbf{Total} & \textbf{61} & \textbf{100\%} & \textbf{63.5\%} \\
\hline
\end{tabular}
\caption{Test Execution Summary}
\end{table}

\section{Test Commands}

\subsection{Run All Tests}
\begin{verbatim}
# Activate virtual environment
.\venv\Scripts\activate.ps1

# Run all unit tests
pytest tests/test_database.py tests/test_auth.py \
       tests/test_docker_executor.py tests/test_app.py -v

# Run with coverage
pytest tests/test_database.py tests/test_auth.py \
       tests/test_docker_executor.py tests/test_app.py \
       -v --cov=. --cov-report=html
\end{verbatim}

\end{document}
